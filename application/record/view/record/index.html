<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>记录管理</title>
    <style>
        .table-fixed{
            table-layout:fixed;
        }
        /*固定长度，溢出隐藏*/
        .trHid{
            width:180px;
            white-space:nowrap;
            text-overflow:ellipsis;
            overflow:hidden;
        }
        table th{
            white-space: nowrap;
        }
        table td{
            white-space: nowrap;
        }
        body,table{
            font-size:12px;
        }
        table{
            empty-cells:show;
            border-collapse: collapse;
            margin:0 auto;
        }

    </style>
</head>

<body class="nav-md">
<div class="container body">
    <div class="main_container">
        <div class="col-md-3 left_col">
            <div class="left_col scroll-view">
                <!--head-->
                {include file="lic/head"/}
                <!--head-->
                <br />
                <!-- sidebar menu -->
                {include file="lic/left"/}
                <!--/sidebar menu-->

                <!-- /menu footer buttons -->
                {include file="lic/foot"/}
                <!-- /menu footer buttons -->
            </div>
        </div>
        <!-- top navigation -->
        {include file="lic/top"/}
        <!-- /top navigation -->

        <!--del-->
        {include file="record/del"/}

        <!-- page content -->
        <div class="right_col" role="main">
            <div class="">
                <div class="page-title">
                    <div class="title_left">
                        <h3>记录</h3>
                    </div>

                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <a href="{:url('Record/aRe')}" class="add-btn">添加记录</a>
                                <ul class="nav navbar-right panel_toolbox">
                                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                    </li>
                                </ul>
                            </div>
                            <!--搜索-->
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                {include file="record/search"/}
                            </div>
                            <div class="x_content">

                                <div class="table-responsive">
                                    <table class="table table-striped jambo_table bulk_action table-fixed">
                                        <thead>
                                        <tr class="headings">
                                            <th>解决时长(小时)</th>
                                            <th>国家</th>
                                            <th>客户</th>
                                            <th>问题分类</th>
                                            <th>问题描述</th>
                                            <th>是否解决</th>
                                            <th>解决方案</th>
                                            <th>记录人</th>
                                            <th>记录时间</th>
                                            <th class="column-title no-link last" style="text-align: center;"><span class="nobr">操作</span>
                                            </th>

                                        </tr>
                                        </thead>

                                        <tbody>
                                        {volist name="record" id="v"}
                                        <tr class="even pointer">
                                            <td>{$v.solveCycle}</td>
                                            <td>{$v.state}</td>
                                            <td class="trHid">{$v.client}</td>
                                            <td>{$v.classify}</td>
                                            <td class="trHid">{$v.description}</td>
                                            {if condition="$v.solved eq 0"}
                                            <td>已解决</td>
                                            {elseif condition="$v.solved eq 1"}
                                            <td>未解决</td>
                                            {else/}
                                            <td>正在解决</td>
                                            {/if}

                                            <td class="trHid">{$v.solution}</td>
                                            <td>{$v.recorder}</td>
                                            <td>{$v.recordDate}</td>
                                            <td style="text-align: center;">
                                                <a href="{:url('Record/view',['rid'=>$v['rid']])}" class="glyphicon glyphicon-sunglasses" style="color: #00a0e9;font-size: 18px;"></a>&nbsp;&nbsp;
                                                <a href="{:url('Record/eRe',['rid'=>$v['rid']])}" class="glyphicon glyphicon-edit" style="color: #00a0e9;font-size: 18px;"></a>&nbsp;&nbsp;
                                                <a href="javascript:void (0);" class="glyphicon glyphicon-remove class-del" onclick=confirmDel("{$v['rid']}") style="color: red;font-size: 18px;"></a>
                                            </td>
                                        </tr>
                                        {/volist}
                                        </tbody>
                                        <tdbody>
                                            <td style="color:#00a0e9;font-size:14px;font-weight:bold;">解决时长总计</td>
                                            <td>{$summery}</td>
                                        </tdbody>
                                    </table>
                                    <div style="float: right;">
                                        {$page}
                                    </div>
                                </div>
                    <!-- /page content -->
                </div>
            </div>
        </div>
    </div>
</div>
            </div>
        </div>
    </div>
<!-- jQuery -->
<script src="__VENDOR__/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="__VENDOR__/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="__VENDOR__/fastclick/lib/fastclick.js"></script>
<!-- NProgress -->
<script src="__VENDOR__/nprogress/nprogress.js"></script>
<!-- iCheck -->
<script src="__VENDOR__/iCheck/icheck.min.js"></script>
<!-- Datatables -->
<script src="__VENDOR__/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="__VENDOR__/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<script src="__VENDOR__/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="__VENDOR__/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
<script src="__VENDOR__/datatables.net-buttons/js/buttons.flash.min.js"></script>
<script src="__VENDOR__/datatables.net-buttons/js/buttons.html5.min.js"></script>
<script src="__VENDOR__/datatables.net-buttons/js/buttons.print.min.js"></script>
<script src="__VENDOR__/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
<script src="__VENDOR__/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
<script src="__VENDOR__/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="__VENDOR__/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
<script src="__VENDOR__/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
<script src="__VENDOR__/jszip/dist/jszip.min.js"></script>
<script src="__VENDOR__/pdfmake/build/pdfmake.min.js"></script>
<script src="__VENDOR__/pdfmake/build/vfs_fonts.js"></script>

<!-- Custom Theme Scripts -->
<script src="__JS__/build/js/custom.min.js"></script>
<script>
    $(function () {
        $(".alert-close").click(function () {
            $(".delete").css("display","none")
        })
        $(".alert-cancel").click(function () {
            $(".delete").css("display","none")
        })
        $(".class-del").click(function () {
            $(".delete").css("display","block")
        })
        $(".pass").click(function () {
            $("#alert-pass-update").css("display","block")
        })

    })
    function confirmDel(rid) {
        //console.log(adId);
        $.post("{:url('Record/record')}",{rid:rid},function(data){
            // console.log(data);
            if(data) {
                // console.log(data['id']);
                $("input[name='rid']").val(data[0].rid)
            }
        },'json');
    }
</script>
</body>

</html>